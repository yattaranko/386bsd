VIS(3)                      Library Functions Manual                    VIS(3)

[1mNAME[0m
       vis â€” visually encode characters

[1mSYNOPSIS[0m
       [1m#include <vis.h>[0m

       [4mchar[24m [4m*[0m
       [1mvis[22m([4mchar[24m [4m*dst[24m, [4mchar[24m [4mc[24m, [4mint[24m [4mflag[24m, [4mchar[24m [4mnextc[24m);

       [4mint[0m
       [1mstrvis[22m([4mchar[24m [4m*dst[24m, [4mchar[24m [4m*src[24m, [4mint[24m [4mflag[24m);

       [4mint[0m
       [1mstrvisx[22m([4mchar[24m [4m*dst[24m, [4mchar[24m [4m*src[24m, [4mint[24m [4mlen[24m, [4mint[24m [4mflag[24m);

[1mDESCRIPTION[0m
       The  [1mvis[22m() function copies into [4mdst[24m a string which represents the charâ€
       acter [4mc[24m.  If [4mc[24m needs no encoding,  it  is  copied  in  unaltered.   The
       string  is  null  terminated, and a pointer to the end of the string is
       returned.  The maximum length of any encoding is four  characters  (not
       including  the  trailing NULL); thus, when encoding a set of characters
       into a buffer, the size of the buffer should be four times  the  number
       of  characters encoded, plus one for the trailing NULL.  The flag paraâ€
       meter is used for altering the default range of  characters  considered
       for  encoding  and  for  altering the visual representation.  The addiâ€
       tional character, [4mnextc[24m, is only used when selecting the VIS_CSTYLE enâ€
       coding format (explained below).

       The [1mstrvis[22m() and [1mstrvisx[22m() functions copy into [4mdst[24m a visual representaâ€
       tion of the string [4msrc[24m.  The [1mstrvis[22m() function encodes characters  from
       [4msrc[24m  up  to the first NULL.  The [1mstrvisx[22m() function encodes exactly [4mlen[0m
       characters from [4msrc[24m (this is useful for encoding a block of  data  that
       may  contain  NULLâ€™s).  Both forms NULL terminate [4mdst[24m.  The size of [4mdst[0m
       must be four times the number of characters encoded from [4msrc[24m (plus  one
       for  the NULL).  Both forms return the number of characters in dst (not
       including the trailing NULL).

       The encoding is a unique, invertible representation comprised  entirely
       of  graphic  characters;  it can be decoded back into the original form
       using the [4munvis[24m(3) or [4mstrunvis[24m(3) functions.

       There are two parameters that can be controlled: the range  of  characâ€
       ters  that  are  encoded,  and the type of representation used.  By deâ€
       fault, all nonâ€graphic characters.  except space, tab, and newline  are
       encoded.  (See [4misgraph[24m(3).)  The following flags alter this:

       VIS_SP      Also encode space.

       VIS_TAB
                   Also encode tab.

       VIS_NL      Also encode newline.

       VIS_WHITE   Synonym for VIS_SP | VIS_TAB | VIS_NL.

       VIS_SAFE    Only  encode  "unsafe"  characters.   Unsafe  means control
                   characters which may cause common terminals to perform  unâ€
                   expected functions.  Currently this form allows space, tab,
                   newline,  backspace,  bell, and return â€ in addition to all
                   graphic characters â€ unencoded.

       There are three forms of encoding.  All forms use the backslash characâ€
       ter â€˜\â€™ to introduce a special sequence; two backslashes  are  used  to
       represent a real backslash.  These are the visual formats:

       (default)   Use  an  â€˜Mâ€™  to represent meta characters (characters with
                   the 8th bit set), and use carat â€˜Ë†â€™  to  represent  control
                   characters  see  ([4miscntrl[24m(3)).   The  following formats are
                   used:

                   \Ë†C    Represents the control character â€˜Câ€™.  Spans characâ€
                          ters â€˜\000â€™ through â€˜\037â€™, and â€˜\177â€™ (as â€˜\Ë†?â€™).

                   \Mâ€C   Represents character  â€˜Câ€™  with  the  8th  bit  set.
                          Spans characters â€˜\241â€™ through â€˜\376â€™.

                   \MË†C   Represents  control  character  â€˜Câ€™ with the 8th bit
                          set.  Spans characters â€˜\200â€™  through  â€˜\237â€™,  and
                          â€˜\377â€™ (as â€˜\MË†?â€™).

                   \040   Represents ASCII space.

                   \240   Represents Metaâ€space.

       VIS_CSTYLE  Use  Câ€style backslash sequences to represent standard nonâ€
                   printable characters.  The following sequences are used  to
                   represent the indicated characters:

                         [1m\a [22mâ€ BEL (007)
                         [1m\b [22mâ€ BS (010)
                         [1m\f [22mâ€ NP (014)
                         [1m\n [22mâ€ NL (012)
                         [1m\r [22mâ€ CR (015)
                         [1m\t [22mâ€ HT (011)
                         [1m\v [22mâ€ VT (013)
                         [1m\0 [22mâ€ NUL (000)

                   When using this format, the nextc parameter is looked at to
                   determine  if  a  NULL character can be encoded as â€˜\0â€™ inâ€
                   stead of â€˜\000â€™.  If [4mnextc[24m is an octal  digit,  the  latter
                   representation is used to avoid ambiguity.

       VIS_OCTAL   Use a three digit octal sequence.  The form is â€˜\dddâ€™ where
                   [4md[24m represents an octal digit.

       There  is one additional flag, VIS_NOSLASH, which inhibits the doubling
       of backslashes and the backslash before the default  format  (that  is,
       control  characters  are  represented  by  â€˜Ë†Câ€™  and meta characters as
       â€˜Mâ€Câ€™).  With this flag set, the encoding is ambiguous and  nonâ€invertâ€
       ible.

[1mSEE ALSO[0m
       [4munvis[24m(1), [4munvis[24m(3) [4mstrunvis[24m(3)

[1mHISTORY[0m
       These functions are currently under development.

FreeBSD 13.2                    April 19, 1991                          VIS(3)
